# 后端面试知识点
---
## 一、计算机网络
### 1、OSI 七层模型、TCP/IP 五层模型、TCP/IP 四层模型。每一层的常见协议。

![计算机网络模型](https://i.imgur.com/jlj8vcM.png)

> **PS：集线器、交换机、路由器**    
> **集线器**：物理层，共享带宽    
> **交换机**：数据链路层，交换式集线器，独享带宽，利用物理地址（MAC地址）来确定转发数据的目的地址，不能分割广播域     
> **路由器**：网络层，利用IP地址来确定数据转发的地址，可以分割广播域，提供了防火墙的服务    

**常见协议**
> **应用层**     
> HTTP：超文本传输协议     
> HTTPS：超文本传输安全协议     
> DNS：域名系统     
> SMTP：简单邮件传输协议     
> POP3：邮局协议第3版     
> Telent：远程终端协议     
> FTP：文件传输协议     
> 
> **传输层**     
> TCP：传输控制协议     
> UDP：用户数据包协议     
> 
> **网络层**
> IP：互联网协议     
> RIP：路由信息协议     
> ICMP：互联网控制信息协议（ping）     
> 
> **网络接口层**     
> ARP/RARP：地址解析协议 / 逆向地址解析协议
> 
> **会话层**（拎出来是因为有两个重要的协议）     
> SSL：安全套接字层协议，HTTPS 的基础     
> RPC：远程过程调用协议     


### 2、TCP 和 UDP 的区别
**TCP（传输控制协议）** （对比打电话）
> - **面向连接**的
> - 提供**可靠交付**的服务，无差错、不丢失、不重复、按序到达
> - **一对一**，每条连接只能是点对点
> - 提供**全双工通信**，TCP 连接的两端都设有发送缓存和接收缓存，用来临时存放双方通信的数据
> - **面向字节流**，应用程序和 TCP 的交互是一次一个数据块，TCP 把应用程序发出的数据看成是一连串无结构的字节流
> - **首部开销大**，需要20~60个字节
> - 传输速率慢，消耗资源多

**UDP（用户数据报协议）**
> - **无连接**
> - **不保证数据传输的可靠性**，尽最大努力交付
> - 支持**一对一、一对多、多对一、多对多**
> - **没有拥塞控制**，网络阻塞不会降低源主机的发送速率，适用实时服务
> - **面向数据报**
> - **首部开销小**，只有8个字节
> - 传输速率快，消耗资源少

**PS:**
> **单工通信**：只支持信号在一个方向上传输，不可逆向     
> **半双工通信**：允许信号在两个方向传输，但是同一时刻只允许信号在一个信道上单向传输     
> **（全）双工通信**：有两个信道，允许信号同时双向传输     

### 3、TCP 协议如何保证可靠传输
- **数据分块**：应用数据被分割成 TCP 认为最适合发送的数据块
- **数据包编号**：TCP 给发送的每一个包进行编号，接收方对数据包进行排序，把有序数据传送给应用层
- **校验和**：TCP 将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果接收端收到的检验和有差错，TCP 将丢弃这个报文段和不确认收到此报文段
- **去冗余**：TCP 的接收端会丢弃重复的数据
- **流量控制**：TCP 连接的每一方都有固定大小的缓冲空间，TCP的接收端只允许发送端发送接收端缓冲区能接纳的数据。当接收方来不及处理发送方的数据，能提示发送方降低发送的速率，防止包丢失。TCP 使用的流量控制协议是可变大小的**滑动窗口**协议。 （TCP 利用滑动窗口实现流量控制）
- **拥塞控制**： 当网络拥塞时，减少数据的发送，发送方维持一个拥塞窗口的状态变量，采用四种算法：**慢开始**、**拥塞避免**、**快重传和快恢复**
- **停止等待协议**：每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。**超时重传** —— 当 TCP 发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。

### 4、TCP 三次握手和四次挥手
> **SYN**：同步序列编号，TCP 建立连接时使用的握手信号     
> **ACK**：命令正确应答，确认字符

**三次握手**     

![](https://i.imgur.com/kEAnzwq.jpg)

第一次：客户端 ---> 服务端，发送带有 SYN 标志的数据包，序列号 x      
第二次：服务端 ---> 客户端，发送带有 SYN/ACK 标志的数据包，确认号 x+1，序列号 y     
第三次：客户端 ---> 服务端，发送带有 ACK 标志的数据包，确认号 y+1, 序列号 x+1     

**为什么要三次握手**     
三次握手的目的是建立可靠的通信信道，通信即数据的发送和接收，所以三次握手最终要保证**双方都要确认自己和对方的数据发送和接收都是正常的**。此外，如果不进行三次握手，出现了超时重传，那么服务器就会打开两个连接。如果有第三次握手，客户端会忽略服务器之后发送的对滞留连接请求的连接确认，不进行第三次握手，因此就不会再次打开连接。     

**为什么第二次握手传回 SYN**     
接收端为了告诉发送端，我接收到的信息确实就是你发送的信号。     

**第一次握手传了 SYN，为什么第三次握手还要传 ACK**     
双方通信无误必须是两者互相发送数据都无误。第一次握手传了 SYN 只能证明发送方到接收方的通道没有问题，但是接收方道发送方的通道还需要 ACK 信号来验证。     

**四次挥手**     

![](https://i.imgur.com/O3xiJYm.jpg)

第一次：客户端发送一个 FIN 到服务端，用来关闭客户端到服务端的数据传送     
第二次：服务端收到 FIN，返回 ACK，确认序号为收到的序号加1。此时 TCP 处于半连接（关闭）状态（C 不能到 S，S 能到 C）     
第三次：服务端发送一个 FIN 到客户端，关闭与客户端的连接     
第四次：客户端收到 FIN，返回 ACK，确认序号为收到的序号加1。发出确认后等待 2MSL（最大报文存活时间） 后释放连接。最后服务端收到确认后释放连接。     

**为什么要四次挥手**     
任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入半关闭状态。当另一方也没有数据再发送的时候，则发出连接释放通知，对方确认后就完全关闭了TCP连接。     

**客户端收到服务端的 FIN 发送确认后需要等待 2MSL**     
- 确保最后一个确认报文能够到达，处理服务端未收到确认报文后重发释放请求的情形     
- 让本连接持续时间内所产生的所有报文都从网络中消失，使得下一个新的连接不会出现旧的连接请求报文     

### 5、浏览器输入网址到显示页面的过程，并涉及到哪些协议
**过程：**
1. **DNS 解析**，浏览器查找域名的 IP 地址，查找过程：浏览器缓存、路由器缓存、DNS 缓存
2. 浏览器向 web 服务器**发送一个 HTTP 请求**（先是TCP连接），cookies 随着请求发送给服务器
3. 服务器**处理请求**，包括请求方式、参数、cookies，最后生成一个HTML响应
4. 服务器**返回 HTTP 报文**（HTML响应）
5. 浏览器**解析渲染页面**
6. 连接结束

**涉及到的协议：**     
**DNS**：获取域名对应的 IP 地址     
**TCP**：与服务器建立 TCP 连接 （客户端 TCP 将 HTPP 请求报文分割成报文段并编号，按序可靠地发送给服务端；服务端那边按序重组报文段）     
**IP**：搜索服务端地址，一边中转一边传送     
**OPSF**：IP 数据包在路由器之间进行路由选择     
**ARP**：路由器与服务器通信时，将 ip 地址转换为 MAC 地址     
**HTTP**：生成针对目标 Web 服务器的 HTTP 请求报文     

### 6、HTTP 长连接和短连接
> HTTP 协议的长连接和短连接，实际上就是 TCP 协议的长连接和短连接

**短连接**：客户端和服务器**每进行一次HTTP操作，就建立一次连接**，任务结束就中断连接。当客户端浏览器访问的某个Web资源（HTML、JS、图片等），浏览器就会重新建立一个HTTP会话。HTTP/1.0 默认短连接。     
**长连接**：当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的**TCP连接不会关闭**，客户端再次访问这个服务器时，会继续使用这一条已经建立的连接。HTTP 响应头中有 `Connection:keep-alive` 这行代码，Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接需要客户端和服务端都支持长连接。HTTP/1.1起，默认使用长连接。     

### 7、HTTP 和 HTTPS 的区别
> **HTTPS**：是以安全为目标的HTTP通道，即HTTP的安全版，即HTTP下加入 **SSL** 层，HTTPS的安全基础是 **SSL**，因此加密的详细内容就需要 **SSL**
> HTTPS 协议的主要作用：建立一个信息安全通道，来**保证数据传输的安全**；**确认网站的真实性**。

HTTP 和 HTTPS 的区别：
1. https 协议需要到 ca **申请证书**，一般免费证书较少，因而需要一定费用。
2. http 是超文本传输协议，信息是明文传输，https则是具有安全性的ssl**加密传输**协议。
3. http 和 https 使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是**443**。
4. http 的连接很简单，是无状态的；HTTPS 协议是由 SSL + HTTP 协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。

### 8、HTTP 状态码
| 状态码 | 类别 | 原因 |
| ------ | ------ | ------ |
| 1XX | Informational（信息性状态码） | 接收的请求正在处理 |
| 2XX | Success（成功状态码） | 接收正常处理完毕 |
| 3XX | Redirection（重定向状态码） | 需要进行附加操作完成请求 |
| 4XX | Client Error（客户端错误状态码） | 服务器无法处理请求 |
| 5XX | Server Error（服务器错误状态码） | 服务器处理请求出错 |

> **常见的**     
> 100：请求已被接受，需要继续处理     
> 200：请求成功     
> 301：被请求的资源已永久移动到新位置          
> 302：请求的资源临时从不同的URI响应请求     
> 403：服务器拒绝请求     
> 404：请求失败     
> 500：服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理（服务器代码问题）     
> 503：由于临时的服务器维护或者过载，服务器当前无法处理请求（暂时状态）     